version: '3'

services:
  vikunja:
    image: vikunja/vikunja:unstable
    ports:
      - "3456:3456"
    environment:
      VIKUNJA_SERVICE_PUBLICURL: http://localhost:3456/
      VIKUNJA_RATELIMIT_LIMIT: 10000
    volumes:
      - ${PWD}/files:/app/vikunja/files
      - ${PWD}/db:/db
  vikunja-init:
    image: vikunja/vikunja:unstable
    depends_on:
      - vikunja
    volumes:
      - ${PWD}/files:/app/vikunja/files
      - ${PWD}/db:/db
    command: user create -u test -p test -e test@test.test
